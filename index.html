<!DOCTYPE html>
<html>
  <head>
    <title>Check NFT holdings</title>
  </head>
  <body>
    <h1>Check NFT holdings</h1>
    <p>Enter wallet address:</p>
    <input type="text" id="wallet-address">
    <p>Enter NFT contract address:</p>
    <input type="text" id="nft-contract-address">
    <p>Enter NFT token ID:</p>
    <input type="text" id="nft-token-id">
    <button onclick="checkNftHoldings()">Check</button>
    <p id="result"></p>
    <script>
      function checkNftHoldings() {
        const walletAddress = document.getElementById("wallet-address").value;
        const nftContractAddress = document.getElementById("nft-contract-address").value;
        const nftTokenId = document.getElementById("nft-token-id").value;

        const apiUrl = `https://eth-goerli.g.alchemy.com/v2/OPLiHQCXVIkbWUj74xeWKFU4nPz6hp0a`;

        // Replace {API_KEY} with your Alchemy API key.
        const apiKey = "{API_KEY}";

        const requestOptions = {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            jsonrpc: "2.0",
            id: 1,
            method: "alchemy_getTokenMetadata",
            params: [nftContractAddress, nftTokenId],
          }),
        };

        fetch(apiUrl, requestOptions)
          .then((response) => response.json())
          .then((data) => {
            const tokenHolders = data.result.holders;

            const holdingWallets = tokenHolders.map((holder) => holder.address);

            const result = holdingWallets.includes(walletAddress)
              ? "Wallet holds the NFT"
              : "Wallet does not hold the NFT";

            document.getElementById("result").innerText = result;
          })
          .catch((error) => {
            console.log(error);
            document.getElementById("result").innerText = "Error occurred while checking NFT holdings";
          });
      }
    </script>
  </body>
</html>
